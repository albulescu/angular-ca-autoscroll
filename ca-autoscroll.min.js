/**
* AutoScroll AngularJS Module v1.0.0
* https://github.com/albulescu/angular-ca-autoscroll
*
* Author Albulescu Cosmin <cosmin@albulescu.ro>
* Licensed under the MIT license.
*/

"use strict";angular.module("ca.directive.autoscroll",[]).directive("autoScroll",["$timeout","$q","$parse","$log",function(a,b,c,d){return{restrict:"A",link:function(e,f,g){if("auto"!==f.css("overflow"))return d.warn("Element is not scrollable. Auto scroll has no sense!");var h,i=e.$eval(g.autoScroll),j=i||!0,k=function(a){var b=!1;this.target=a,this.preventDefault=function(){b=!0},this.isDefaultPrevented=function(){return b}};e.$on("$enableAutoScroll",function(){j||d.info("Enable autoscroll"),j=!0}),e.$on("$disableAutoScroll",function(){j&&d.info("Disable autoscroll"),j=!1}),f.on("wheel",function(a){var b=a.originalEvent.detail?-120*a.originalEvent.detail:a.originalEvent.wheelDelta;return b>0?void(j=!1):void(f.get(0).scrollTop>=f.get(0).scrollHeight-f.height()&&(j=!0))}),f.on("DOMNodeInserted",function(d){var l=d.srcElement||d.target,m=d.delegateTarget;1===l.nodeType&&j===!0&&i===!0&&(a.cancel(h),h=a(function(){var a=new k(f),d={$event:a},h=c(g.autoScrollTrigger)||angular.noop,i=h(e,d);i&&b.when(i).then(function(){m.scrollTop=m.scrollHeight}),a.isDefaultPrevented()||(m.scrollTop=m.scrollHeight)}))})}}}]);